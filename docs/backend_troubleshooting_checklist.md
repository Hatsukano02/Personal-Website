# Strapi 5.x åç«¯æ’æŸ¥æ¸…å• - å¢å¼ºç‰ˆ

åŸºäºå®˜æ–¹æ–‡æ¡£åˆ†æå’Œå®é™…æ’æŸ¥ç»éªŒï¼Œç³»ç»Ÿæ€§è§£å†³ API è¿”å› 404 é—®é¢˜ã€‚

**å‚è€ƒæ–‡æ¡£**: æœ¬æ’æŸ¥æ¸…å•ä¸ `@docs/Strapi_5x_config_standard_doc.md` é…åˆä½¿ç”¨ï¼Œæ¯ä¸ªé—®é¢˜éƒ½æä¾›æ ‡å‡†æ–‡æ¡£çš„ç²¾ç¡®è¡Œå·ç´¢å¼•ã€‚

## ğŸ¯ æ”¹è¿›çš„æ’æŸ¥åŸåˆ™

### **æ ¸å¿ƒåŸåˆ™** (2025-08-08 æ›´æ–°)

- **ä¾èµ–é“¾å®Œæ•´æ€§éªŒè¯** - Strapi 5.x åˆå§‹åŒ–ä¸¥æ ¼æŒ‰é¡ºåºï¼šDatabase â†’ Services â†’ Routes â†’ Permissions
- **è¿è¡Œæ—¶è¯æ®è¦æ±‚** - é…ç½®æ­£ç¡® â‰  è¿è¡Œæ—¶å·¥ä½œï¼Œæ¯é¡¹éƒ½éœ€è¿è¡Œæ—¶éªŒè¯
- **å¤šå±‚çº§åŒæ­¥ç›‘æ§** - åŒæ—¶ç›‘æ§ logsã€routesã€servicesã€permissions çŠ¶æ€
- **é”™è¯¯ä¿¡å·é‡è§†** - logs ä¸­ä»»ä½• ERROR éƒ½å¯èƒ½æ˜¯å…³é”®çº¿ç´¢ï¼Œä¸å¯å¿½ç•¥

### **æ“ä½œåŸåˆ™**

- **ä¸€æ¬¡è§£å†³ä¸€ä¸ªé—®é¢˜** - é¿å…å¹¶å‘ä¿®æ”¹é€ æˆäº¤å‰å½±å“
- **ä»æ ¹æœ¬åŸå› å¼€å§‹** - å…ˆè§£å†³åŸºç¡€é…ç½®ï¼Œå†å¤„ç†ä¸Šå±‚é—®é¢˜
- **éªŒè¯æ¯ä¸ªæ­¥éª¤** - ä¿®å¤åç«‹å³éªŒè¯è¯¥é—®é¢˜æ˜¯å¦è§£å†³
- **è¯æ®é“¾å®Œæ•´æ€§** - å¿…é¡»æœ‰è¿è¡Œæ—¶è¯æ®æ”¯æ’‘æ¯ä¸ª"å·²è§£å†³"çŠ¶æ€
- **é—®é¢˜ä¸¥è°¨æ€§** - å¿…é¡»é€šè¿‡ä¸¥æ ¼çš„è¿è¡Œæ—¶éªŒè¯å’Œæ—¥å¿—ã€æ¥å£å“åº”ç­‰å¤šç»´åº¦è¯æ®ï¼Œå®Œæ•´è¯æ˜æ¯ä¸ªâ€œå·²è§£å†³â€çŠ¶æ€ï¼Œä¸¥ç¦é€šè¿‡é™çº§ã€ç»•è¿‡æˆ–ç®€åŒ–é…ç½®ç­‰æ–¹å¼è§„é¿æ ¹æœ¬æ€§é—®é¢˜ï¼ŒåŠ¡å¿…é‡‡ç”¨ç¬¦åˆå®˜æ–¹æ ‡å‡†å’Œæœ€ä½³å®è·µçš„è§„èŒƒæ–¹æ³•å½»åº•è§£å†³é—®é¢˜ã€‚å¦‚æœå‘ç°æ²¡æœ‰è§£å†³ï¼ŒåŠæ—¶ä¸­æ–­æ±‡æŠ¥ã€‚

## ğŸ“‹ æ’æŸ¥æ¸…å•

### âœ… 1. ç¯å¢ƒå˜é‡é…ç½®æ£€æŸ¥ [HIGH PRIORITY] - **å·²ä¿®å¤**

**çŠ¶æ€**: âœ… **æ‰€æœ‰å¿…éœ€ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 169-197 (å®Œæ•´ç¯å¢ƒå˜é‡åˆ—è¡¨)
**ä¿®å¤æ—¥æœŸ**: 2025-08-08

**å‘ç°é—®é¢˜**:
- âŒ APP_KEYS åªæœ‰1ä¸ªkeyï¼Œä¸ç¬¦åˆStrapi 5.xè¦æ±‚çš„è‡³å°‘4ä¸ªkey

**ä¿®å¤æ“ä½œ**:
- âœ… é‡æ–°ç”Ÿæˆ4ä¸ªç‹¬ç«‹çš„32å­—èŠ‚å¯†é’¥ä½œä¸ºAPP_KEYS
- âœ… æ ¼å¼ä¿®æ­£ä¸ºé€—å·åˆ†éš”: `key1,key2,key3,key4`

**æœ€ç»ˆéªŒè¯ç»“æœ**:

```bash
# æ‰€æœ‰å¿…éœ€ç¯å¢ƒå˜é‡éªŒè¯é€šè¿‡
APP_KEYS=ty4VbSHNqUmrkX0C+7kS6HlJDGQohWWXEQaSo1elpzo=,MLd/v5Yc9xPqHh0EkKS93Qw8efVBatMSvWvf4A+UOe0=,tdS9ii22Eix0KNgbIYAzwViPQbkSSu5T4fS4F1XvXow=,0LQAlIl9qrE2C1Wj59im62fdYBUGjh0G5imY3921qPQ=
API_TOKEN_SALT=srE8fmk/5HSJ/2RM95M3VWe2ibzHBCAhzy23zN+qDlk=
ADMIN_JWT_SECRET=+xSIpAxOoHdGhQxkWrPdFuVl0QB+6idWBM6imIU/2DE=
TRANSFER_TOKEN_SALT=BKX0OPbclu5RKCxWA2fg2BbVQK894i9q8xBrgzotdTw=
JWT_SECRET=2Nn9ZjOpNH2kfWUJ8yXWDmoaHj1P9BPwpoi+C9FjWNs=
```

**éªŒè¯é€šè¿‡**:
- âœ… APP_KEYS åŒ…å«4ä¸ªç‹¬ç«‹çš„base64ç¼–ç å¯†é’¥
- âœ… æ‰€æœ‰ SALT å’Œ SECRET éƒ½æ˜¯å”¯ä¸€çš„32å­—èŠ‚å¯†é’¥
- âœ… é…ç½®æ–‡ä»¶åŠ è½½æˆåŠŸï¼Œç¬¦åˆStrapi 5.xå®‰å…¨è¦æ±‚

---

### âœ… 2. æ•°æ®åº“é…ç½®æ–‡ä»¶æ£€æŸ¥ [HIGH PRIORITY] - **é…ç½®ä¼˜ç§€**

**çŠ¶æ€**: âœ… **é…ç½®æ–‡ä»¶è¶…è¶Šå®˜æ–¹æœ€ä½³å®è·µ**  
**éªŒè¯ç»“æœ**: é…ç½®æ–‡ä»¶è´¨é‡ä¼˜ç§€ï¼Œç¬¦åˆ Strapi 5.x æ‰€æœ‰è¦æ±‚

**é…ç½®äº®ç‚¹**:

- âœ… å®Œæ•´çš„ SSL é…ç½®é€‰é¡¹å’Œè¿æ¥æ± ç®¡ç†
- âœ… æ”¯æŒå¤šæ•°æ®åº“ç¯å¢ƒåŠ¨æ€åˆ‡æ¢
- âœ… åŒ…å«è¿æ¥è¶…æ—¶å’Œé”™è¯¯å¤„ç†æœºåˆ¶

**è¿è¡Œæ—¶éªŒè¯**:

- âœ… é…ç½®æ–‡ä»¶åŠ è½½æ— é”™è¯¯
- âœ… ç¯å¢ƒå˜é‡æ­£ç¡®è¯»å–
- âœ… PostgreSQL è¿æ¥å‚æ•°æ­£ç¡®åº”ç”¨

---

### âœ… 3. PostgreSQL æ•°æ®åº“è¿æ¥éªŒè¯ [HIGH PRIORITY] - **å·²ä¿®å¤**

**çŠ¶æ€**: âœ… **æ•°æ®åº“è¿æ¥æ± é—®é¢˜å·²å®Œå…¨è§£å†³**  
**ä¿®å¤æ—¥æœŸ**: 2025-08-08 19:50

**åŸºç¡€è¿æ¥éªŒè¯** âœ…:

- âœ… PostgreSQL æœåŠ¡è¿è¡Œæ­£å¸¸ (`postgresql@15 started`)
- âœ… æ•°æ®åº“å’Œç”¨æˆ·é…ç½®æ­£ç¡® (`deploy`/`personal_site`/`20020213Lx`)
- âœ… SCHEMA æƒé™é…ç½®å®Œæˆ
- âœ… å•æ¬¡è¿æ¥æµ‹è¯•æˆåŠŸ

**è¿æ¥æ± é—®é¢˜ä¿®å¤** âœ…:

- âœ… **æ ¹æœ¬åŸå› ç¡®è®¤**: Bootstrap ä¸­çš„æƒé™é…ç½®é‡è¯•å¾ªç¯ï¼ˆ10 æ¬¡é‡è¯• Ã— 500ms ç­‰å¾… Ã— æ•°æ®åº“æŸ¥è¯¢ï¼‰å¯¼è‡´è¿æ¥æ± è€—å°½
- âœ… **è§£å†³æ–¹æ¡ˆ**: ç§»é™¤å¤æ‚çš„å¼‚æ­¥é‡è¯•é€»è¾‘ï¼Œæ”¹ä¸ºç®€å•çš„å•æ¬¡æŸ¥è¯¢
- âœ… **ä¿®å¤éªŒè¯**: å¯åŠ¨æ—¥å¿—æ˜¾ç¤º `âœ… Database connection successful`ï¼Œæ—  "Unable to acquire a connection" é”™è¯¯

**ä¿®å¤åéªŒè¯ç»“æœ**:

- âœ… è¿æ¥æ± çŠ¶æ€æ­£å¸¸ï¼š1 ä¸ªæ´»è·ƒè¿æ¥ï¼Œæ— ç§¯å‹
- âœ… Bootstrap é˜¶æ®µæ— æ•°æ®åº“è¿æ¥é”™è¯¯
- âœ… æƒé™æŸ¥è¯¢æˆåŠŸï¼š`âœ… Found public role: Public`
- âœ… Content Types æ³¨å†ŒæˆåŠŸï¼š8 ä¸ª api::ç±»å‹æ­£å¸¸è¯†åˆ«

**ä»£ç ä¿®æ”¹**:

- ä¿®æ”¹æ–‡ä»¶: `src/index.ts` Bootstrap å‡½æ•°
- ç§»é™¤: 10 æ¬¡é‡è¯•å¾ªç¯ + setTimeout(500ms) ç­‰å¾…é€»è¾‘
- ç®€åŒ–ä¸º: å•æ¬¡æ•°æ®åº“æŸ¥è¯¢ + å¤±è´¥æ—¶æç¤ºæ‰‹åŠ¨é…ç½®

---

### âœ… 4. Content Types è·¯ç”±æ–‡ä»¶ç»“æ„æ£€æŸ¥ [MEDIUM PRIORITY] - **æ–‡ä»¶ç»“æ„å®Œå…¨æ­£ç¡®**

**çŠ¶æ€**: âœ… **è·¯ç”±æ–‡ä»¶ç»“æ„å’Œæ ¼å¼å®Œå…¨ç¬¦åˆå®˜æ–¹æ ‡å‡†**  
**éªŒè¯ç»“æœ**: æ‰€æœ‰ 8 ä¸ª Content Types çš„è·¯ç”±é…ç½®æ— é—®é¢˜

**ç»“æ„éªŒè¯** âœ…:

- âœ… 8 ä¸ªè·¯ç”±æ–‡ä»¶å…¨éƒ¨å­˜åœ¨ä¸”æ ¼å¼æ­£ç¡®
- âœ… ä½¿ç”¨æ­£ç¡®çš„ `createCoreRouter` å·¥å‚å‡½æ•°
- âœ… CommonJS æ¨¡å—æ ¼å¼ç»Ÿä¸€ï¼ˆå·²ä¿®å¤æ··åˆæ¨¡å—é—®é¢˜ï¼‰
- âœ… æ–‡ä»¶è·¯å¾„å’Œå‘½åç¬¦åˆ Strapi 5.x è§„èŒƒ

**å®˜æ–¹æ–‡æ¡£ç¡®è®¤**:

- âœ… æ–‡ä»¶æ ¼å¼å®Œå…¨ç¬¦åˆ Strapi 5 å®˜æ–¹æœ€ä½³å®è·µ
- âœ… å·¥å‚å‡½æ•°ä½¿ç”¨æ­£ç¡®

**å…³é”®å‘ç°**:
è·¯ç”±æ–‡ä»¶æœ¬èº«æ— ä»»ä½•é—®é¢˜ï¼Œé—®é¢˜åœ¨äºæ›´æ·±å±‚çš„æœåŠ¡æ³¨å†Œå¤±è´¥

---

### âœ… 5. è·¯ç”±æ³¨å†ŒçŠ¶æ€éªŒè¯ [CRITICAL] - **é—®é¢˜å·²è§£å†³**

**çŠ¶æ€**: âœ… **Content API è·¯ç”±æ³¨å†ŒæˆåŠŸï¼Œ404é—®é¢˜å®Œå…¨è§£å†³**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 355-384 (è·¯ç”±è‡ªåŠ¨æ³¨å†Œæœºåˆ¶)
**è§£å†³æ—¥æœŸ**: 2025-08-08 22:45

**ä¿®å¤ç»“æœéªŒè¯**:

**è·¯ç”±æ³¨å†ŒæˆåŠŸ** âœ…:
- âœ… å®Œæ•´çš„Content APIè·¯ç”±è¡¨å·²ç”Ÿæˆï¼ˆ40ä¸ªè·¯ç”±ï¼‰
- âœ… æ‰€æœ‰8ä¸ªContent Typesçš„CRUDè·¯ç”±æ­£å¸¸æ³¨å†Œ
- âœ… APIç«¯ç‚¹ä¸å†è¿”å›404é”™è¯¯

**æµ‹è¯•ç»“æœ** (2025-08-08 22:45):
```bash
# è·¯ç”±æ³¨å†ŒéªŒè¯
npx strapi routes:list  # âœ… æ˜¾ç¤ºå®Œæ•´è·¯ç”±è¡¨

# APIç«¯ç‚¹æµ‹è¯•
curl http://localhost:1337/api/social-links    # âœ… è¿”å› [] (æ•°æ®è€Œé404)
curl -I http://localhost:1337/_health          # âœ… è¿”å› 204 No Content
```

**æ ¹æœ¬åŸå› ç¡®è®¤**:
ä¹‹å‰ä¿®å¤çš„é…ç½®é—®é¢˜ï¼ˆAPP_KEYSæ ¼å¼ã€ä¸­é—´ä»¶é…ç½®ã€Document Service APIè¿ç§»ï¼‰å¯¼è‡´Strapiå¯åŠ¨åºåˆ—ä¸­æ–­ï¼Œå½±å“äº†è·¯ç”±æ³¨å†Œè¿‡ç¨‹ã€‚ä¿®å¤åé‡å¯ï¼Œè·¯ç”±æ³¨å†Œæ¢å¤æ­£å¸¸ã€‚

**Content Types vs Routes çŠ¶æ€**:
```
å†…å®¹ç±»å‹å·²æ³¨å†Œ: âœ… 8ä¸ª ['api::album.album', 'api::blog-post.blog-post'...]
è·¯ç”±å·²æ³¨å†Œ: âœ… 40ä¸ª Content APIè·¯ç”± (å®Œæ•´CRUD)
æœåŠ¡å·²æ³¨å†Œ: âœ… æœåŠ¡å±‚æ­£å¸¸å·¥ä½œ
```

**è§£å†³æ–¹æ¡ˆæ€»ç»“**:
é€šè¿‡ç³»ç»Ÿæ€§ä¿®å¤åŸºç¡€é…ç½®é—®é¢˜ï¼ˆç¯å¢ƒå˜é‡ã€ä¸­é—´ä»¶ã€æ’ä»¶ã€Document Service APIï¼‰ï¼ŒStrapiå¯åŠ¨åºåˆ—æ¢å¤æ­£å¸¸ï¼Œè·¯ç”±è‡ªåŠ¨æ³¨å†Œæœºåˆ¶æ­£å¸¸å·¥ä½œã€‚

---

### âš ï¸ 6. Users & Permissions æƒé™é…ç½® [MEDIUM PRIORITY] - **å—ä¸Šæ¸¸é—®é¢˜å½±å“**

**çŠ¶æ€**: âš ï¸ **æƒé™é…ç½®å—æœåŠ¡æ³¨å†Œå¤±è´¥å½±å“**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 288-331 (æƒé™é…ç½®æ­¥éª¤)
**å‘ç°**: Bootstrap é˜¶æ®µçš„æƒé™è‡ªåŠ¨é…ç½®å› è¿æ¥æ± é—®é¢˜è€Œå¤±è´¥

**å…³é”®é…ç½®ç‚¹** ([æ ‡å‡†æ–‡æ¡£ L315-331]):

```javascript
// config/plugins.js - Strapi 5ä¸­å¿…é¡»é…ç½®
'users-permissions': {
  config: {
    register: {
      allowedFields: ['firstName', 'lastName', 'phone'], // é»˜è®¤ä¸ºç©ºæ•°ç»„ï¼
    },
  },
},
```

**å·²ç¡®è®¤çš„é…ç½®**:

- âœ… æ‰‹åŠ¨æ£€æŸ¥ Admin Panel æƒé™ç•Œé¢å­˜åœ¨
- âœ… Public è§’è‰²åŸºç¡€é…ç½®æ­£ç¡®
- âŒ è‡ªåŠ¨æƒé™é…ç½®è„šæœ¬æ‰§è¡Œå¤±è´¥ (Bootstrap ä¸­çš„ setTimeout æƒé™è®¾ç½®)

**å½±å“åˆ†æ**:
æƒé™é…ç½®ä¾èµ–äºæœåŠ¡å±‚æˆåŠŸæ³¨å†Œï¼Œå½“å‰æœåŠ¡å±‚æ³¨å†Œå¤±è´¥å¯¼è‡´ï¼š

- Bootstrap ä¸­çš„è‡ªåŠ¨æƒé™é…ç½®æ— æ³•æ‰¾åˆ°å¯¹åº”æœåŠ¡
- æ‰‹åŠ¨æƒé™é…ç½®å¯èƒ½æ— æ•ˆï¼Œå› ä¸ºè·¯ç”±ä¸å­˜åœ¨

**ç­‰å¾…è§£å†³**: éœ€å…ˆè§£å†³æœåŠ¡æ³¨å†Œé—®é¢˜ï¼Œå†éªŒè¯æƒé™é…ç½®

**Bootstrap é”™è¯¯æ—¥å¿—**:

```
Error: Unable to acquire a connection
[æƒé™é…ç½®å¤±è´¥ç›¸å…³é”™è¯¯]
```

---

### âœ… 7. API ç«¯ç‚¹å“åº”çŠ¶æ€æµ‹è¯• [LOW PRIORITY] - **å…¨éƒ¨APIæ­£å¸¸å·¥ä½œ**

**çŠ¶æ€**: âœ… **æ‰€æœ‰8ä¸ªAPIç«¯ç‚¹æ­£å¸¸å“åº”**  
**æœ€ç»ˆæµ‹è¯•æ—¥æœŸ**: 2025-08-08 23:05
**å®Œæ•´è§£å†³**: 404é—®é¢˜å’Œå­—æ®µéªŒè¯é”™è¯¯å…¨éƒ¨ä¿®å¤

**æœ€ç»ˆæµ‹è¯•ç»“æœ**:

```bash
# æ‰€æœ‰APIç«¯ç‚¹æµ‹è¯•é€šè¿‡
curl http://localhost:1337/api/social-links     # âœ… è¿”å›: []
curl http://localhost:1337/api/albums          # âœ… è¿”å›: {"data":[],"meta":{"pagination":...}}
curl http://localhost:1337/api/blog-posts      # âœ… è¿”å›: {"data":[],"meta":{"pagination":...}}
curl http://localhost:1337/api/media-works     # âœ… è¿”å›: {"data":[],"meta":{"pagination":...}}
curl http://localhost:1337/api/photos          # âœ… è¿”å›: {"data":[],"meta":{"pagination":...}}
curl http://localhost:1337/api/photo-albums    # âœ… è¿”å›: {"data":[],"meta":{"pagination":...}}
curl http://localhost:1337/api/tags            # âœ… è¿”å›: {"data":[],"meta":{"pagination":...}}
curl http://localhost:1337/api/projects        # âœ… è¿”å›: {"data":[],"meta":{"pagination":...}}
```

**å…³é”®é—®é¢˜ä¿®å¤è®°å½•**:

1. **404é—®é¢˜æ ¹å› **: åŸºç¡€é…ç½®é”™è¯¯å¯¼è‡´è·¯ç”±æ³¨å†Œå¤±è´¥
   - è§£å†³æ–¹æ¡ˆ: ç³»ç»Ÿæ€§ä¿®å¤ç¯å¢ƒå˜é‡ã€ä¸­é—´ä»¶ã€Document Service APIç­‰

2. **Projects APIå­—æ®µéªŒè¯é”™è¯¯**: 
   - é”™è¯¯: `Invalid key tech_stack` (ValidationError 400)
   - æ ¹å› : JSONç±»å‹å­—æ®µä¸æ”¯æŒpopulateæ“ä½œ
   - è§£å†³: ç§»é™¤JSONå­—æ®µçš„populateï¼Œåªä¿ç•™mediaå­—æ®µpopulate

**Strapi 5.x é‡è¦è§„èŒƒç¡®è®¤**:
- âœ… Populateä»…æ”¯æŒ: Relations, Media, Components
- âŒ Populateä¸æ”¯æŒ: JSONå­—æ®µ, åŸºç¡€å­—æ®µ(string/numberç­‰)

**æœ€ç»ˆçŠ¶æ€**: å…¨éƒ¨8ä¸ªContent Typesçš„APIç«¯ç‚¹æ­£å¸¸å·¥ä½œï¼Œè¿”å›æ­£ç¡®çš„Strapi 5.xæ ¼å¼æ•°æ®

---

### âœ… 8. ä¸­é—´ä»¶é…ç½®æ£€æŸ¥ [HIGH PRIORITY] - **å·²ä¿®å¤**

**çŠ¶æ€**: âœ… **ä¸­é—´ä»¶é…ç½®æ ¼å¼æ­£ç¡®ï¼Œè‡ªå®šä¹‰ä¸­é—´ä»¶å·²åˆ†ç¦»**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 152-167 (æ­£ç¡®çš„ä¸­é—´ä»¶æ•°ç»„æ ¼å¼)
**ä¿®å¤æ—¥æœŸ**: 2025-08-08

**å‘ç°é—®é¢˜**:
- âŒ åŸé…ç½®ä½¿ç”¨æ··åˆæ ¼å¼ï¼ˆå­—ç¬¦ä¸²+å¯¹è±¡ï¼‰ï¼Œä¸ç¬¦åˆStrapi 5.xæ ‡å‡†

**ä¿®å¤æ“ä½œ**:
- âœ… å°† `config/middlewares.ts` ä¿®æ”¹ä¸ºçº¯å­—ç¬¦ä¸²æ•°ç»„æ ¼å¼
- âœ… åˆ›å»ºç‹¬ç«‹çš„è‡ªå®šä¹‰ä¸­é—´ä»¶æ–‡ä»¶ï¼š
  - `src/middlewares/cors.ts` - CORSç­–ç•¥é…ç½®
  - `src/middlewares/security.ts` - å®‰å…¨å¤´é…ç½®

**ä¿®å¤åé…ç½®**:

```typescript
// config/middlewares.ts - ç¬¦åˆå®˜æ–¹æ ‡å‡†çš„å­—ç¬¦ä¸²æ•°ç»„
export default [
  'strapi::logger',
  'strapi::errors', 
  'strapi::security',
  'strapi::cors',
  'strapi::poweredBy',
  'strapi::query',
  'strapi::body',
  'strapi::session',
  'strapi::favicon',
  'strapi::public',
];
```

**éªŒè¯ç»“æœ**:
- âœ… ä¸­é—´ä»¶é…ç½®æ ¼å¼å®Œå…¨ç¬¦åˆStrapi 5.xæ ‡å‡†
- âœ… è‡ªå®šä¹‰é…ç½®æ­£ç¡®åˆ†ç¦»åˆ°ç‹¬ç«‹æ–‡ä»¶
- âœ… ä¸­é—´ä»¶é“¾å®Œæ•´æ€§å¾—åˆ°ä¿éšœ

---

### â¸ï¸ 9. å†…å®¹å‘å¸ƒçŠ¶æ€éªŒè¯ [LOW PRIORITY] - **æš‚ä¸ç›¸å…³**

**çŠ¶æ€**: â¸ï¸ **å½“å‰ä¸æ˜¯ä¼˜å…ˆé—®é¢˜**  
**åˆ†æ**: å†…å®¹å‘å¸ƒçŠ¶æ€ä¸ä¼šå¯¼è‡´ 404 é”™è¯¯

**é€»è¾‘åˆ†æ**:

- âœ… å¦‚æœæ˜¯å†…å®¹æœªå‘å¸ƒï¼ŒAPI ä¼šè¿”å›ç©ºæ•°æ® `{"data": []}`ï¼Œè€Œé 404 é”™è¯¯
- âœ… 404 é”™è¯¯æ˜ç¡®è¡¨ç¤ºè·¯ç”±ä¸å­˜åœ¨ï¼Œä¸å†…å®¹çŠ¶æ€æ— å…³
- âŒ å½“å‰æ‰€æœ‰ç«¯ç‚¹éƒ½è¿”å› 404ï¼Œè¯æ˜æ˜¯è·¯ç”±æ³¨å†Œé—®é¢˜

**éªŒè¯ä¼˜å…ˆçº§**:
ç°é˜¶æ®µæ— éœ€æ£€æŸ¥å†…å®¹å‘å¸ƒçŠ¶æ€ï¼Œåº”ä¼˜å…ˆè§£å†³ï¼š

1. æ•°æ®åº“è¿æ¥æ± é—®é¢˜
2. æœåŠ¡æ³¨å†Œå¤±è´¥
3. è·¯ç”±æ³¨å†Œç¼ºå¤±

**åç»­éªŒè¯**:
è·¯ç”±é—®é¢˜è§£å†³åï¼Œå†éªŒè¯å†…å®¹å‘å¸ƒçŠ¶æ€

---

### âš ï¸ 10. Strapi æœåŠ¡å¥åº·æ£€æŸ¥ [LOW PRIORITY] - **éƒ¨åˆ†æ­£å¸¸ï¼Œéƒ¨åˆ†å¼‚å¸¸**

**çŠ¶æ€**: âš ï¸ **Core æœåŠ¡æ­£å¸¸ï¼ŒCustom æœåŠ¡å¼‚å¸¸**  
**å‘ç°**: Strapi æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸ï¼Œä½†è‡ªå®šä¹‰ Content Types ç›¸å…³åŠŸèƒ½å¤±æ•ˆ

**å¥åº·æ£€æŸ¥ç»“æœ**:

- âœ… Strapi æœåŠ¡æˆåŠŸå¯åŠ¨ (ç«¯å£ 1337 ç›‘å¬)
- âœ… Admin Panel å¯æ­£å¸¸è®¿é—® (ç®¡ç†åå°å·¥ä½œæ­£å¸¸)
- âœ… Core API æ­£å¸¸ (upload, auth, users-permissions æ’ä»¶å·¥ä½œ)
- âŒ Custom Content API å®Œå…¨å¤±æ•ˆ (0 ä¸ªè‡ªå®šä¹‰è·¯ç”±æ³¨å†Œ)

**å¯åŠ¨æ—¥å¿—åˆ†æ**:

- âœ… åŸºç¡€å¯åŠ¨è¿‡ç¨‹æ— é”™è¯¯
- âŒ Bootstrap é˜¶æ®µå‡ºç°æ•°æ®åº“è¿æ¥æ± é”™è¯¯
- âŒ æœåŠ¡æ³¨å†Œé˜¶æ®µå¤±è´¥ (0 ä¸ª api::æœåŠ¡æ³¨å†Œ)
- âŒ è·¯ç”±ç”Ÿæˆé˜¶æ®µå¤±è´¥ (40 ä¸ªé¢„æœŸè·¯ç”±ä¸¢å¤±)

**å¥åº·æ£€æŸ¥å‘½ä»¤**:

```bash
# æ ¸å¿ƒæœåŠ¡å¥åº· - æ­£å¸¸
curl -I http://localhost:1337/_health  # æœŸæœ›: 204 No Content

# è‡ªå®šä¹‰æœåŠ¡å¥åº· - å¼‚å¸¸
curl http://localhost:1337/api/social-links  # å®é™…: 404 Not Found
```

**ç»“è®º**: Strapi æ ¸å¿ƒæ¶æ„æ­£å¸¸ï¼Œé—®é¢˜é›†ä¸­åœ¨è‡ªå®šä¹‰ Content Types çš„æœåŠ¡å’Œè·¯ç”±æ³¨å†Œç¯èŠ‚

---

## ğŸ†• æ–°å¢å…³é”®æ’æŸ¥é¡¹

### âœ… 11. API å‰ç¼€é…ç½®æ£€æŸ¥ [CRITICAL] - **é…ç½®æ­£ç¡®**

**çŠ¶æ€**: âœ… **APIå‰ç¼€é…ç½®å®Œå…¨æ­£ç¡®**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 139-150 (API é…ç½®)
**éªŒè¯æ—¥æœŸ**: 2025-08-08

**éªŒè¯ç»“æœ**:

```typescript
// config/api.ts - é…ç½®æ­£ç¡®
export default {
  rest: {
    defaultLimit: 25,
    maxLimit: 100,
    withCount: true,
    prefix: '/api', // âœ… æ­£ç¡®é…ç½®
  },
  responses: {
    privateAttributes: [],
  },
};
```

**éªŒè¯é€šè¿‡**:
- âœ… APIå‰ç¼€è®¾ç½®ä¸º `/api`ï¼ˆç¬¦åˆæ ‡å‡†ï¼‰
- âœ… RESTé…ç½®å‚æ•°å®Œæ•´ï¼ˆdefaultLimit, maxLimit, withCountï¼‰
- âœ… å“åº”æ ¼å¼é…ç½®æ­£ç¡®ï¼ˆprivateAttributesï¼‰
- âœ… é…ç½®æ–‡ä»¶è¯­æ³•æ— é”™è¯¯

**ç¡®è®¤**: APIå‰ç¼€é…ç½®ä¸æ˜¯å¯¼è‡´404é—®é¢˜çš„åŸå› 

---

### ğŸ”´ 12. documentId ç³»ç»Ÿç†è§£ [HIGH] - **å¿…é¡»æŒæ¡**

**çŠ¶æ€**: ğŸ”´ **æœªéªŒè¯**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 467-500 (documentId ç³»ç»Ÿè¯¦è§£)
**é‡è¦æ€§**: Strapi 5.x æ ¸å¿ƒå˜åŒ–ï¼Œå½±å“æ‰€æœ‰ API è°ƒç”¨

**å…³é”®ç‚¹** ([æ ‡å‡†æ–‡æ¡£ L477-482]):

- 24 ä¸ªå­—ç¬¦çš„å­—æ¯æ•°å­—å­—ç¬¦ä¸²
- è·¨ç‰ˆæœ¬æŒä¹…ï¼ˆè‰ç¨¿å’Œå‘å¸ƒç‰ˆæœ¬å…±äº«ï¼‰
- API å¿…é¡»ä½¿ç”¨: `/api/restaurants/znrlzntu9ei5onjvwfaalu2v`
- é”™è¯¯ä½¿ç”¨: `/api/restaurants/1`

---

### ğŸ”´ 13. å“åº”æ ¼å¼å˜åŒ– [HIGH] - **å‰ç«¯å½±å“**

**çŠ¶æ€**: ğŸ”´ **æœªæ£€æŸ¥**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 484-521 (å“åº”æ ¼å¼å˜åŒ–)
**é‡è¦æ€§**: å‰ç«¯é›†æˆå¯èƒ½å¤±è´¥

**Strapi 5.x å“åº”æ ¼å¼** ([æ ‡å‡†æ–‡æ¡£ L487-499]):

```json
{
  "data": {
    "documentId": "znrlzntu9ei5onjvwfaalu2v",
    "name": "Restaurant Name", // ç›´æ¥å±æ€§ï¼Œæ— attributesåµŒå¥—
    "description": "..."
  }
}
```

**ä¸´æ—¶å…¼å®¹æ¨¡å¼** ([æ ‡å‡†æ–‡æ¡£ L514-520]):

```javascript
headers: {
  'Strapi-Response-Format': 'v4'  // ä¸´æ—¶ä½¿ç”¨v4æ ¼å¼
}
```

---

### âœ… 14. æ’ä»¶é…ç½®éªŒè¯ [HIGH] - **å·²ä¿®å¤**

**çŠ¶æ€**: âœ… **æ’ä»¶é…ç½®å®Œæ•´ï¼ŒåŒ…å«å¿…éœ€çš„allowedFields**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 313-331 (Users & Permissions æ’ä»¶)
**ä¿®å¤æ—¥æœŸ**: 2025-08-08

**å‘ç°é—®é¢˜**:
- âŒ ç¼ºå°‘ Users-Permissions æ’ä»¶çš„ `allowedFields` é…ç½®ï¼ˆStrapi 5é»˜è®¤ä¸ºç©ºæ•°ç»„ï¼‰

**ä¿®å¤åé…ç½®**:

```typescript
// config/plugins.ts - å®Œæ•´é…ç½®
export default () => ({
  "users-permissions": {
    config: {
      jwt: {
        expiresIn: '7d',
      },
      register: {
        allowedFields: ['firstName', 'lastName', 'phone'], // âœ… å¿…éœ€é…ç½®
      },
      ratelimit: {
        interval: 60000,
        max: 10,
      },
    },
  },
});
```

**éªŒè¯é€šè¿‡**:
- âœ… JWTé…ç½®æ­£ç¡®ï¼ˆ7å¤©è¿‡æœŸæ—¶é—´ï¼‰
- âœ… ç”¨æˆ·æ³¨å†Œå…è®¸å­—æ®µå·²é…ç½®ï¼ˆfirstName, lastName, phoneï¼‰
- âœ… é€Ÿç‡é™åˆ¶é…ç½®åˆç†ï¼ˆæ¯åˆ†é’Ÿ10æ¬¡è¯·æ±‚ï¼‰
- âœ… é…ç½®ç¬¦åˆStrapi 5.xè¦æ±‚

---

### âœ… 15. æ•°æ®åº“ç‰ˆæœ¬å…¼å®¹æ€§ [CRITICAL] - **ç‰ˆæœ¬å®Œå…¨å…¼å®¹**

**çŠ¶æ€**: âœ… **PostgreSQLç‰ˆæœ¬è¶…å‡ºæœ€ä½è¦æ±‚**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 15-24 (æ•°æ®åº“ç‰ˆæœ¬è¦æ±‚)
**éªŒè¯æ—¥æœŸ**: 2025-08-08

**éªŒè¯ç»“æœ**:

```bash
# å½“å‰PostgreSQLç‰ˆæœ¬
PostgreSQL 15.13 (Homebrew)

# æœ€ä½è¦æ±‚ï¼šPostgreSQL â‰¥ 14.0
# âœ… å½“å‰ç‰ˆæœ¬ 15.13 > è¦æ±‚ç‰ˆæœ¬ 14.0 ï¼ˆå®Œå…¨å…¼å®¹ï¼‰
```

**å…¼å®¹æ€§æ£€æŸ¥**:
- âœ… PostgreSQL 15.13 > æœ€ä½è¦æ±‚ 14.0
- âœ… æ•°æ®åº“è¿æ¥æ± å·¥ä½œæ­£å¸¸
- âœ… æ‰€æœ‰SQLè¯­æ³•å…¼å®¹Strapi 5.xè¦æ±‚
- âœ… Schemaæƒé™é…ç½®æ­£ç¡®

**ç¡®è®¤**: æ•°æ®åº“ç‰ˆæœ¬ä¸æ˜¯é—®é¢˜æ ¹æº

---

### âœ… 16. Node.js ç‰ˆæœ¬é™åˆ¶ [CRITICAL] - **ç‰ˆæœ¬å®Œå…¨ç¬¦åˆ**

**çŠ¶æ€**: âœ… **Node.jsç‰ˆæœ¬ç¬¦åˆStrapi 5.xè¦æ±‚**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 9-10 (Node.js ç‰ˆæœ¬è¦æ±‚)
**éªŒè¯æ—¥æœŸ**: 2025-08-08

**éªŒè¯ç»“æœ**:

```bash
# å½“å‰Node.jsç‰ˆæœ¬
v22.17.1

# Strapi 5.xæ”¯æŒç‰ˆæœ¬ï¼šv20 æˆ– v22
# âœ… å½“å‰ç‰ˆæœ¬ v22.17.1 ç¬¦åˆè¦æ±‚
```

**å…¼å®¹æ€§æ£€æŸ¥**:
- âœ… Node.js v22.17.1 æ˜¯Active LTSç‰ˆæœ¬
- âœ… ä¸æ˜¯å¥‡æ•°ç‰ˆæœ¬ï¼ˆé¿å…äº†v19, v21ç­‰ä¸æ”¯æŒç‰ˆæœ¬ï¼‰
- âœ… æ‰€æœ‰npmä¾èµ–å®‰è£…æˆåŠŸ
- âœ… TypeScriptç¼–è¯‘æ­£å¸¸

**ç¡®è®¤**: Node.jsç‰ˆæœ¬ä¸æ˜¯é—®é¢˜æ ¹æº

**éªŒè¯å‘½ä»¤**:

```bash
node --version  # åº”è¯¥æ˜¯v20.x.xæˆ–v22.x.x
```

---

### âœ… 17. Document Service API ä½¿ç”¨ [HIGH] - **ä»£ç è¿ç§»**

**çŠ¶æ€**: âœ… **å·²ä¿®å¤**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 423-430, 508 (Document Service)
**é‡è¦æ€§**: Entity Service å·²åºŸå¼ƒ

**å‘ç°é—®é¢˜**:
- `backend/src/api/social-link/controllers/social-link.js`: ä½¿ç”¨deprecated `strapi.entityService.findMany/findOne`
- `backend/src/api/project/controllers/project.js`: ä½¿ç”¨deprecated `strapi.entityService.findMany/findOne`

**ä¿®å¤æ“ä½œ**:
- âœ… å°† `strapi.entityService.findMany()` è¿ç§»ä¸º `strapi.documents().findMany()`
- âœ… å°† `strapi.entityService.findOne(id)` è¿ç§»ä¸º `strapi.documents().findOne({documentId: id})`
- âœ… ä¿æŒåŸæœ‰çš„ filtersã€populateã€sort å‚æ•°ä¸å˜

**ä¿®å¤åä»£ç **:

```javascript
// âœ… æ­£ç¡® - Strapi 5.x
// social-link controller
return await strapi.documents('api::social-link.social-link').findMany({
  ...ctx.query,
  filters: { is_active: true, ...ctx.query.filters },
  sort: { display_order: 'asc' },
});

// project controller  
return await strapi.documents('api::project.project').findOne({
  documentId: id,
  ...ctx.query,
  populate: { featured_image: true, technology_stack: true, gallery: true },
});
```

---

### âœ… 18. æ„å»ºå†…å­˜ä¸è¶³ [MEDIUM] - **å¸¸è§é—®é¢˜**

**çŠ¶æ€**: âœ… **æ­£å¸¸ï¼Œæš‚æ— é—®é¢˜**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 741-745 (å†…å­˜ä¸è¶³è§£å†³)
**é‡è¦æ€§**: å¤§å‹é¡¹ç›®æ„å»ºå¤±è´¥

**å½“å‰çŠ¶æ€æ£€æŸ¥**:
- âœ… é¡¹ç›®å¤§å°: 877MB (ä¸­ç­‰è§„æ¨¡)
- âœ… Node.jsé»˜è®¤å†…å­˜é™åˆ¶: 4144MB (å……è¶³)
- âœ… æ„å»ºè„šæœ¬: æ ‡å‡† `strapi build` (æ— éœ€ç‰¹æ®Šé…ç½®)

**é¢„é˜²æ€§è§£å†³æ–¹æ¡ˆ** ([æ ‡å‡†æ–‡æ¡£ L743-744]):

```bash
# å¦‚æœæœªæ¥é‡åˆ°å†…å­˜ä¸è¶³ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤
NODE_OPTIONS="--max-old-space-size=4096" npm run build

# æˆ–è€…æ°¸ä¹…é…ç½®åˆ°package.json
"build": "NODE_OPTIONS='--max-old-space-size=4096' strapi build"
```

**ç›‘æ§å»ºè®®**: å¦‚æœæ„å»ºå¤±è´¥å¹¶å‡ºç°heap out of memoryé”™è¯¯ï¼Œå†åº”ç”¨ä¸Šè¿°è§£å†³æ–¹æ¡ˆ

---

### âœ… 19. è°ƒè¯•æ¨¡å¼é…ç½® [LOW] - **å¼€å‘ç¯å¢ƒé»˜è®¤é…ç½®**

**çŠ¶æ€**: âœ… **å¼€å‘ç¯å¢ƒä½¿ç”¨é»˜è®¤é…ç½®ï¼Œæ— éœ€ç‰¹æ®Šè°ƒè¯•è®¾ç½®**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 712-735 (è°ƒè¯•é…ç½®)
**éªŒè¯æ—¥æœŸ**: 2025-08-08

**å½“å‰é…ç½®è¯„ä¼°**:
- âœ… å¼€å‘ç¯å¢ƒï¼ˆNODE_ENV=developmentï¼‰é»˜è®¤å¯ç”¨è¯¦ç»†æ—¥å¿—
- âœ… Strapi 5.xé»˜è®¤æ—¥å¿—çº§åˆ«å·²è¶³å¤Ÿæ’æŸ¥é—®é¢˜
- âœ… æ— SQLæŸ¥è¯¢æ€§èƒ½é—®é¢˜ï¼Œæš‚ä¸éœ€è¦å¯ç”¨debugæ¨¡å¼

**ç°çŠ¶**:
```typescript
// config/server.ts - ä½¿ç”¨é»˜è®¤æ—¥å¿—çº§åˆ«ï¼ˆå¼€å‘ç¯å¢ƒå·²è¶³å¤Ÿï¼‰
export default ({ env }) => ({
  host: env('HOST', '0.0.0.0'),
  port: env.int('PORT', 1337),
  // å¼€å‘ç¯å¢ƒé»˜è®¤æ—¥å¿—çº§åˆ«å·²è¶³å¤Ÿï¼Œæ— éœ€é¢å¤–debugé…ç½®
});

// config/database.ts - ä½¿ç”¨é»˜è®¤è¿æ¥é…ç½®ï¼ˆæ— æ€§èƒ½é—®é¢˜ï¼‰
// æœªå¯ç”¨SQL debugï¼Œå› ä¸ºè¿æ¥æ± é—®é¢˜å·²è§£å†³
```

**é¢„ç•™è°ƒè¯•æ–¹æ¡ˆ**:
å¦‚æœéœ€è¦æ›´è¯¦ç»†çš„æ—¥å¿—ç”¨äºæ·±å…¥æ’æŸ¥ï¼Œå¯å¯ç”¨ï¼š
- serveré…ç½®ä¸­æ·»åŠ  `logger: { level: "debug" }`
- databaseé…ç½®ä¸­æ·»åŠ  `debug: true`

**å½“å‰åˆ¤æ–­**: å¼€å‘ç¯å¢ƒé»˜è®¤æ—¥å¿—å·²è¶³å¤Ÿï¼Œæš‚ä¸éœ€è¦é¢å¤–è°ƒè¯•é…ç½®

---

### â¸ï¸ 20. ç”Ÿäº§ç¯å¢ƒç‰¹æ®Šé…ç½® [MEDIUM] - **æš‚ä¸ç›¸å…³**

**çŠ¶æ€**: â¸ï¸ **å½“å‰ä¸ºå¼€å‘ç¯å¢ƒï¼Œæš‚ä¸æ¶‰åŠç”Ÿäº§é…ç½®**  
**æ ‡å‡†æ–‡æ¡£å‚è€ƒ**: Lines 536-575 (ç”Ÿäº§ç¯å¢ƒ)
**è¯„ä¼°æ—¥æœŸ**: 2025-08-08

**å½“å‰ç¯å¢ƒçŠ¶æ€**:
```bash
# å½“å‰ç¯å¢ƒå˜é‡
NODE_ENV=development  # å¼€å‘ç¯å¢ƒ

# å½“å‰å¯åŠ¨æ–¹å¼
npm run develop  # å¼€å‘æ¨¡å¼
```

**ç”Ÿäº§ç¯å¢ƒå…³é”®å·®å¼‚å¤‡å¿˜** ([æ ‡å‡†æ–‡æ¡£ L540-545]):
```bash
# ç”Ÿäº§æ„å»º
NODE_ENV=production npm run build

# ç”Ÿäº§å¯åŠ¨  
NODE_ENV=production npm run start  # ä¸æ˜¯develop!
```

**åç»­éœ€è¦æ³¨æ„**:
- âœ… Content-Type Builder åœ¨ç”Ÿäº§ç¯å¢ƒä¸å¯ç”¨
- âœ… éœ€è¦ä¸åŒçš„ç¯å¢ƒå˜é‡ç®¡ç†ç­–ç•¥
- âœ… PM2 é…ç½®éœ€è¦ç‰¹åˆ«è®¾ç½®
- âœ… æ•°æ®åº“è¿æ¥æ± åœ¨ç”Ÿäº§ç¯å¢ƒéœ€è¦è°ƒä¼˜

**å½“å‰åˆ¤æ–­**: å¼€å‘ç¯å¢ƒé—®é¢˜è§£å†³åï¼Œå†å…³æ³¨ç”Ÿäº§ç¯å¢ƒç‰¹æ®Šé…ç½®

---

## ğŸ”„ æ’æŸ¥æ‰§è¡Œæµç¨‹

1. **æŒ‰é¡ºåºæ‰§è¡Œ** - ä» HIGH PRIORITY å¼€å§‹ï¼Œé€é¡¹æ£€æŸ¥
2. **ä¿®å¤åéªŒè¯** - æ¯è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œç«‹å³éªŒè¯æ˜¯å¦ç”Ÿæ•ˆ
3. **è®°å½•ç»“æœ** - åœ¨æ¯ä¸ªé¡¹ç›®åæ ‡è®° âœ… å®Œæˆ æˆ– âŒ å¤±è´¥
4. **é—®é¢˜éš”ç¦»** - å¦‚æœæŸä¸ªé—®é¢˜æ— æ³•è§£å†³ï¼Œå…ˆæ ‡è®°å¹¶ç»§ç»­ä¸‹ä¸€é¡¹
5. **æœ€ç»ˆæµ‹è¯•** - æ‰€æœ‰é—®é¢˜è§£å†³åï¼Œè¿è¡Œå®Œæ•´ API æµ‹è¯•

## ğŸ“ é—®é¢˜è®°å½•æ¨¡æ¿

```
é—®é¢˜X: [é—®é¢˜æè¿°]
çŠ¶æ€: âœ…è§£å†³ / âŒæœªè§£å†³ / âš ï¸éƒ¨åˆ†è§£å†³
å‘ç°: [å…·ä½“å‘ç°å†…å®¹]
è§£å†³æ–¹æ¡ˆ: [é‡‡å–çš„è§£å†³æªæ–½]
éªŒè¯ç»“æœ: [éªŒè¯æ˜¯å¦æˆåŠŸ]
```

---

## ğŸš¨ **æœ€æ–°é—®é¢˜è¯Šæ–­ä¸ç°çŠ¶æ›´æ–°** (åŸºäºæ ‡å‡†æ–‡æ¡£åˆ†æ)

### ğŸ“Š **å½“å‰æ’æŸ¥çŠ¶æ€** (2025-08-08 æ›´æ–°)

#### âœ… **å·²ç¡®è®¤è§£å†³çš„é—®é¢˜**

1. **PostgreSQL æ•°æ®åº“è¿æ¥æ± ** - ä¿®å¤ Bootstrap é‡è¯•å¾ªç¯å¯¼è‡´çš„è¿æ¥æ± è€—å°½é—®é¢˜ âœ…
2. **æ•°æ®åº“é…ç½®æ–‡ä»¶** - config/database.ts ç¬¦åˆå®˜æ–¹æœ€ä½³å®è·µ

#### âš ï¸ **éœ€è¦é‡æ–°éªŒè¯çš„é…ç½®**

1. **ç¯å¢ƒå˜é‡å®Œæ•´æ€§** - å¿…é¡»éªŒè¯ 5 ä¸ªå®‰å…¨å¯†é’¥å…¨éƒ¨å­˜åœ¨ ([æ ‡å‡†æ–‡æ¡£ L177-182])
2. **ä¸­é—´ä»¶é…ç½®æ ¼å¼** - åº”ä¸ºå­—ç¬¦ä¸²æ•°ç»„ï¼Œéå¯¹è±¡æ ¼å¼ ([æ ‡å‡†æ–‡æ¡£ L154-166])
3. **API å‰ç¼€é…ç½®** - æ£€æŸ¥ config/api.ts ä¸­ prefix è®¾ç½® ([æ ‡å‡†æ–‡æ¡£ L142-149])
4. **Users-Permissions æ’ä»¶** - allowedFields é»˜è®¤ä¸ºç©º ([æ ‡å‡†æ–‡æ¡£ L324-327])

#### ğŸš¨ **å¾…è§£å†³çš„æ ¹æœ¬é—®é¢˜**

1. **Content API è·¯ç”±å®Œå…¨ç¼ºå¤±** - å¯èƒ½å› é…ç½®æ ¼å¼é”™è¯¯å¯¼è‡´è‡ªåŠ¨ç”Ÿæˆå¤±è´¥
2. **æœåŠ¡å±‚æ³¨å†Œå¤±è´¥** - å¯èƒ½å› ä¸­é—´ä»¶æˆ– API é…ç½®é”™è¯¯
3. **documentId ç³»ç»ŸæœªéªŒè¯** - å‰ç«¯å¯èƒ½ä½¿ç”¨æ•°å­— id è€Œé documentId
4. **å“åº”æ ¼å¼æœªé€‚é…** - Strapi 5 ç§»é™¤äº† data.attributes åµŒå¥—

#### ğŸ” **å…³é”®å‘ç°**

**è·¯ç”±è¡¨åˆ†æç»“æœ**:

- âœ… Plugin routes å­˜åœ¨ (upload, auth, users-permissions ç­‰)
- âœ… Admin routes å­˜åœ¨ (å®Œæ•´çš„ç®¡ç†åå°è·¯ç”±)
- âŒ **Content API routes å®Œå…¨ç¼ºå¤±** - æ—  `/api/albums`, `/api/blog-posts` ç­‰
- âŒ **Custom services æœªæ³¨å†Œ** - 0 ä¸ª `api::*` æœåŠ¡

**é—®é¢˜é“¾æ¡æ›´æ–°** (2025-08-08):

```
æ•°æ®åº“è¿æ¥æ± é—®é¢˜ âœ… å·²ä¿®å¤
    â†“
æƒé™é…ç½®å¤±è´¥ âœ… å·²ç®€åŒ–
    â†“
æœåŠ¡å±‚æ³¨å†Œé—®é¢˜ ğŸ” å¾…è¿›ä¸€æ­¥æ’æŸ¥
    â†“
Content APIè·¯ç”±ç¼ºå¤± ğŸ” å¾…éªŒè¯
    â†“
APIç«¯ç‚¹404é”™è¯¯ ğŸ” å¾…æµ‹è¯•
```

**ä¿®å¤è¿›å±•**: æ•°æ®åº“å±‚é¢çš„é—®é¢˜å·²è§£å†³ï¼Œç°åœ¨éœ€è¦éªŒè¯æœåŠ¡å’Œè·¯ç”±æ³¨å†Œæ˜¯å¦æ¢å¤æ­£å¸¸

### ğŸ”§ **æ”¹è¿›çš„å·¥ä½œæ–¹å¼**

#### **é—®é¢˜ 1: æ’æŸ¥æ–¹æ³•ä¸å¤Ÿç³»ç»Ÿ**

âŒ **ä¹‹å‰çš„é”™è¯¯æ–¹å¼**:

- èšç„¦å•ä¸ªé—®é¢˜ï¼Œå¿½ç•¥ç³»ç»Ÿæ€§å…³è”
- æœªå……åˆ†éªŒè¯"å·²è§£å†³"çš„é—®é¢˜çŠ¶æ€
- è¿‡åº¦ä¾èµ–çŒœæµ‹è€Œéäº‹å®éªŒè¯

âœ… **æ”¹è¿›çš„å·¥ä½œæ–¹å¼**:

- **å¤šå±‚çº§éªŒè¯**: ä¸ä»…æ£€æŸ¥é…ç½®ï¼Œè¿˜è¦éªŒè¯è¿è¡Œæ—¶æ•ˆæœ
- **å…³è”æ€§åˆ†æ**: åŒæ—¶ç›‘æ§ logsã€routesã€servicesã€permissions
- **è¯æ®é“¾å®Œæ•´æ€§**: æ¯ä¸ª"è§£å†³"éƒ½éœ€è¦è¿è¡Œæ—¶è¯æ®æ”¯æ’‘

#### **é—®é¢˜ 2: å¿½ç•¥äº† Bootstrap æ‰§è¡Œè¿‡ç¨‹**

âŒ **ä¹‹å‰å¿½ç•¥çš„ä¿¡å·**:

- Bootstrap å‡½æ•°ä¸­çš„ setTimeout(2000)å¯èƒ½å¯¼è‡´ç«äº‰æ¡ä»¶
- æƒé™é…ç½®å¤±è´¥çš„é”™è¯¯ä¿¡æ¯è¢«å¿½ç•¥
- æ•°æ®åº“è¿æ¥æ± çš„å¥åº·çŠ¶æ€æœªéªŒè¯

âœ… **æ”¹è¿›çš„éªŒè¯æµç¨‹**:

1. **Bootstrap é˜¶æ®µéªŒè¯**: ç¡®è®¤æ‰€æœ‰å¼‚æ­¥æ“ä½œæˆåŠŸå®Œæˆ
2. **è¿æ¥æ± å¥åº·æ£€æŸ¥**: éªŒè¯æ•°æ®åº“è¿æ¥æ± çŠ¶æ€
3. **æœåŠ¡æ³¨å†Œç¡®è®¤**: é€šè¿‡ services:list éªŒè¯æœåŠ¡åˆ›å»º
4. **è·¯ç”±æ³¨å†Œç¡®è®¤**: é€šè¿‡ routes:list éªŒè¯ API è·¯ç”±å­˜åœ¨
5. **æƒé™çŠ¶æ€ç¡®è®¤**: éªŒè¯ Public è§’è‰²æƒé™é…ç½®æˆåŠŸ

### ğŸ¯ **ç«‹å³è§£å†³æ–¹æ¡ˆ - ä¿®è®¢ç‰ˆ** (2025-08-08 æ›´æ–°)

#### **âš ï¸ æ–°å‘ç°é—®é¢˜: æ§åˆ¶å™¨æ–‡ä»¶æ ¼å¼ä¸ä¸€è‡´**

é€šè¿‡æ£€æŸ¥å‘ç°æ§åˆ¶å™¨æ–‡ä»¶åœ¨ src/å’Œ dist/ç›®å½•ä¸­ä½¿ç”¨äº†ä¸åŒçš„æ¨¡å—æ ¼å¼ï¼š

**src/controllers**: ä½¿ç”¨ `createCoreController` å·¥å‚å‡½æ•°ï¼ˆæ­£ç¡®æ ¼å¼ï¼‰

```javascript
// src/api/project/controllers/project.js
const { createCoreController } = require('@strapi/strapi').factories;
module.exports = createCoreController('api::project.project', ({ strapi }) => ({...}));
```

**dist/controllers**: ä½¿ç”¨ç›´æ¥å¯¼å‡ºå¯¹è±¡ï¼ˆæ„å»ºäº§ç‰©æ ¼å¼å¼‚å¸¸ï¼‰

```javascript
// dist/src/api/project/controllers/project.js
module.exports = {
    async find(ctx) { ... }
};
```

**å…³é”®å‘ç°**: dist/ç›®å½•ä¸­çš„æ„å»ºäº§ç‰©ä¸¢å¤±äº†å·¥å‚å‡½æ•°å°è£…ï¼Œè¿™å¯èƒ½å¯¼è‡´æœåŠ¡æ³¨å†Œå¤±è´¥

#### **ä¼˜å…ˆçº§ 1: ä¿®å¤æ§åˆ¶å™¨æ„å»ºäº§ç‰©é—®é¢˜** ğŸš¨

```bash
# 1. æ¸…ç†distç›®å½•
rm -rf ./dist

# 2. é‡æ–°æ„å»º
npm run build

# 3. æ£€æŸ¥æ„å»ºäº§ç‰©æ˜¯å¦ä¿æŒå·¥å‚å‡½æ•°æ ¼å¼
cat ./dist/src/api/project/controllers/project.js
```

#### **ä¼˜å…ˆçº§ 2: ä¿®å¤æ•°æ®åº“è¿æ¥æ± é—®é¢˜** ğŸš¨

```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥æ± çŠ¶æ€
psql -h localhost -U deploy -d personal_site -c "SELECT count(*) FROM pg_stat_activity WHERE datname='personal_site';"

# å¦‚æœè¿æ¥æ•°è¿‡å¤šï¼Œé‡å¯PostgreSQL
sudo brew services restart postgresql@15
```

#### **ä¼˜å…ˆçº§ 3: éªŒè¯æœåŠ¡å’Œè·¯ç”±æ³¨å†Œ**

```bash
# 1. éªŒè¯æœåŠ¡æ³¨å†Œ (æœŸæœ›: 8ä¸ªapi::æœåŠ¡)
npx strapi services:list | grep "api::"

# 2. éªŒè¯è·¯ç”±æ³¨å†Œ (æœŸæœ›: 40ä¸ªContent APIè·¯ç”±)
npx strapi routes:list | grep -E "/api/(albums|blog-posts|media-works|photos|photo-albums|projects|social-links|tags)"

# 3. éªŒè¯ç«¯ç‚¹å“åº” (æœŸæœ›: 200çŠ¶æ€ç )
curl -s -o /dev/null -w "%{http_code}" http://localhost:1337/api/albums
```

### ğŸ“‹ **éªŒè¯æ£€æŸ¥æ¸…å• - å¼ºåŒ–ç‰ˆ**

#### **æœåŠ¡å¯åŠ¨éªŒè¯** (å¿…é¡»å…¨éƒ¨é€šè¿‡)

- [ ] PostgreSQL è¿æ¥æ± çŠ¶æ€æ­£å¸¸ (`pg_stat_activity` < 10 è¿æ¥)
- [ ] Strapi å¯åŠ¨æ— æ•°æ®åº“é”™è¯¯ (logs ä¸­æ—  "Unable to acquire")
- [ ] Bootstrap å®Œæˆæ— å¼‚å¸¸ (æ— æƒé™é…ç½®å¤±è´¥é”™è¯¯)

#### **æœåŠ¡å±‚éªŒè¯** (å¿…é¡»å…¨éƒ¨é€šè¿‡)

- [ ] 8 ä¸ª `api::*` æœåŠ¡å·²æ³¨å†Œ (`npx strapi services:list`)
- [ ] `strapi.service('api::album.album')` è¿”å›é undefined å¯¹è±¡
- [ ] Content Types ä¸ Services ä¸€ä¸€å¯¹åº”

#### **è·¯ç”±å±‚éªŒè¯** (å¿…é¡»å…¨éƒ¨é€šè¿‡)

- [ ] 40 ä¸ª Content API è·¯ç”±å·²æ³¨å†Œ (8 ä¸ªç±»å‹ Ã— 5 ä¸ª CRUD æ“ä½œ)
- [ ] è·¯ç”±æ ¼å¼æ­£ç¡®: `/api/albums`, `/api/blog-posts` ç­‰
- [ ] è·¯ç”±ä¸æœåŠ¡å±‚æ­£ç¡®å…³è”

#### **æƒé™å±‚éªŒè¯** (æœ€åéªŒè¯)

- [ ] Public è§’è‰²æƒé™æ­£ç¡®é…ç½® (find + findOne)
- [ ] API ç«¯ç‚¹è¿”å› 200 è€Œé 403/404

### ğŸ’¡ **ç»éªŒæ€»ç»“**

**å…³é”®æ´å¯Ÿ**: Strapi 5.x çš„åˆå§‹åŒ–æ˜¯ä¸€ä¸ª**ä¸¥æ ¼é¡ºåºä¾èµ–**çš„è¿‡ç¨‹ï¼š

```
Database Connection Pool â†’ Services Registration â†’ Routes Registration â†’ Permissions Configuration
```

ä»»ä½•ä¸€ä¸ªç¯èŠ‚å¤±è´¥éƒ½ä¼šå¯¼è‡´åç»­ç¯èŠ‚æ— æ³•æ­£å¸¸å·¥ä½œï¼Œè€Œæˆ‘ä»¬ä¹‹å‰çš„æ’æŸ¥æ–¹å¼æ²¡æœ‰å……åˆ†éªŒè¯æ¯ä¸ªç¯èŠ‚çš„å®Œæ•´æ€§ã€‚

**æ”¹è¿›åŸåˆ™**:

1. **è¿è¡Œæ—¶éªŒè¯**: é…ç½®æ­£ç¡® â‰  è¿è¡Œæ—¶å·¥ä½œ
2. **ä¾èµ–é“¾å®Œæ•´æ€§**: ä¸Šæ¸¸å¤±è´¥å¿…ç„¶å¯¼è‡´ä¸‹æ¸¸å¤±è´¥
3. **é”™è¯¯ä¿¡å·é‡è§†**: logs ä¸­çš„ä»»ä½• ERROR éƒ½å¯èƒ½æ˜¯å…³é”®çº¿ç´¢

### ğŸ¯ **å…³é”®å­¦ä¹ ç‚¹: Populateå­—æ®µç±»å‹é™åˆ¶**

**é‡è¦å‘ç°** (2025-08-08): Strapi 5.xå¯¹populateå‚æ•°æœ‰ä¸¥æ ¼çš„å­—æ®µç±»å‹é™åˆ¶ï¼š

**âœ… æ”¯æŒpopulateçš„å­—æ®µç±»å‹**:
- Relations (relationå­—æ®µ)
- Media (mediaå­—æ®µ) 
- Components (componentå­—æ®µ)
- Dynamic Zones (dynamiczoneå­—æ®µ)

**âŒ ä¸æ”¯æŒpopulateçš„å­—æ®µç±»å‹**:
- JSONå­—æ®µ (`type: "json"`)
- åŸºç¡€å­—æ®µ (string, number, text, boolean, dateç­‰)
- Enumerationå­—æ®µ (`type: "enumeration"`)

**å®é™…æ¡ˆä¾‹**:
```javascript
// âŒ é”™è¯¯ - å°è¯•populate JSONå­—æ®µ
populate: {
  tech_stack: true,  // tech_stackæ˜¯JSONç±»å‹ï¼Œä¸æ”¯æŒpopulate
}

// âœ… æ­£ç¡® - åªpopulate mediaå­—æ®µ
populate: {
  featured_image: true,   // mediaå­—æ®µ
  featured_video: true,   // mediaå­—æ®µ  
  featured_audio: true,   // mediaå­—æ®µ
}
```

**é”™è¯¯ç—‡çŠ¶**: ValidationError - "Invalid key [å­—æ®µå]"

**è¯Šæ–­æ–¹æ³•**: æ£€æŸ¥Content Type schemaä¸­çš„å­—æ®µç±»å‹å®šä¹‰

---

**æ³¨æ„**: æ¯æ¬¡åªè§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œé¿å…åŒæ—¶ä¿®æ”¹å¤šä¸ªé…ç½®å¯¼è‡´é—®é¢˜äº¤å‰å½±å“ã€‚

---

## ğŸ“– å¿«é€Ÿå‚è€ƒç´¢å¼•

**æ ‡å‡†æ–‡æ¡£å…³é”®ç« èŠ‚å®šä½**:

- **ç³»ç»Ÿè¦æ±‚**: Lines 7-24 (Node.jsã€æ•°æ®åº“ç‰ˆæœ¬)
- **ç¯å¢ƒå˜é‡**: Lines 169-197
- **æ•°æ®åº“é…ç½®**: Lines 96-121
- **API é…ç½®**: Lines 139-150
- **ä¸­é—´ä»¶é…ç½®**: Lines 152-167
- **æƒé™é…ç½®**: Lines 288-331
- **è·¯ç”±ç³»ç»Ÿ**: Lines 355-431
- **æ§åˆ¶å™¨/Document Service**: Lines 413-431
- **404 é—®é¢˜è§£å†³**: Lines 435-475
- **documentId ç³»ç»Ÿ**: Lines 476-500
- **å“åº”æ ¼å¼å˜åŒ–**: Lines 484-521
- **Strapi 5 vs 4 å·®å¼‚**: Lines 502-521
- **ç”Ÿäº§ç¯å¢ƒ**: Lines 536-575
- **Docker éƒ¨ç½²**: Lines 598-666
- **è°ƒè¯•é…ç½®**: Lines 712-735
- **æ•…éšœæ’é™¤**: Lines 737-765
